# Shell env (bash & zsh)
# Apple Silicon / Homebrew — detection via uname for Bash and Zsh
if [ "$(uname -s)" = "Darwin" ]; then
  if [ -x /opt/homebrew/bin/brew ]; then
    eval "$(/opt/homebrew/bin/brew shellenv)"
  fi
  export HOMEBREW_NO_AUTO_UPDATE=1
fi

# XDG Base Directory
: "${XDG_CONFIG_HOME:=${HOME}/.config}"
: "${XDG_CACHE_HOME:=${HOME}/.cache}"
: "${XDG_DATA_HOME:=${HOME}/.local/share}"
: "${XDG_STATE_HOME:=${HOME}/.local/state}"
: "${DOTFILES:=${HOME}/.dotfiles}"
export XDG_CONFIG_HOME XDG_CACHE_HOME XDG_DATA_HOME XDG_STATE_HOME DOTFILES

# User binaries first in PATH
PATH="${HOME}/.local/bin:${PATH}"

# asdf — XDG path then shims on PATH
# https://asdf-vm.com/guide/getting-started.html
export ASDF_DATA_DIR="${XDG_DATA_HOME}/asdf"
export ASDF_CONFIG_FILE="${XDG_CONFIG_HOME}/asdf/asdfrc"
export ASDF_DEFAULTS_ROOT="${XDG_CONFIG_HOME}/asdf"
export PATH="${ASDF_DATA_DIR}/shims:$PATH"

# Terminal colors
export TERM="xterm-256color"

# Locale
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"

# Editor (nvim if present, else vim)
if command -v nvim >/dev/null 2>&1; then
  export EDITOR="nvim"
else
  export EDITOR="vim"
fi
export VISUAL="$EDITOR"
export GIT_EDITOR="$EDITOR"

# Pager
export PAGER="less"
export LESS="-R -F -X"
export LESSHISTFILE="${XDG_DATA_HOME}/less/history"
